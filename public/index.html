<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.0/socket.io.js"></script>
    <style>
        body {
            height: 100%;
        }
        textarea {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <h1>พิมพ์ไรวะ</h1>
    <button id="bt">copy text</button>
    <p id="success" style="display: none; color:green;">ก้อปเสร็จยะ!</p>
    <textarea id="type"></textarea>
    <script>
        const socket = io();
        const type = document.getElementById('type');
        const success = document.getElementById('success');
        
        type.addEventListener('input', () => {
            socket.emit('typing', { text: type.value });
        });
        socket.on('update', (data) => {
            type.value = data.text; 
        });
        document.addEventListener('DOMContentLoaded', () => {
            const type = document.getElementById('type');
            const copybt = document.getElementById('bt');
            copybt.addEventListener('click',async ()=> {
                try{
                    await navigator.clipboard.writeText(type.value);
                    success.style.display='block';   
                    setTimeout(() => {
                        success.style.display='none';
                },3000);
                    }
                    catch(e){
                        alert('error');
                    }
                });
        });
    </script>
</body>
</html>

